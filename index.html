<!doctype html><title>scrambledegg&#39;s blog</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.16-DEV"><meta name=description content="マビノギ ルエリサーバ 6chで活動するギルドscrambledeggのブログです"><meta property=og:title content="scrambledegg's blog"><meta property=og:description content="マビノギ ルエリサーバ 6chで活動するギルドscrambledeggのブログです"><meta property=og:type content=website><meta property=og:url content=https://scrambledegg.github.io/><meta property=og:updated_time content=2016-05-14T00:00:00&#43;00:00><meta itemprop=name content="scrambledegg's blog"><meta itemprop=description content="マビノギ ルエリサーバ 6chで活動するギルドscrambledeggのブログです"><link rel=stylesheet href=/css/google-font.css><link rel=stylesheet href=/css/font-awesome.min.css><link rel=stylesheet href=/css/main.css><link rel=stylesheet href=/css/add-on.css><link rel=stylesheet href=/css/monokai-sublime.css><link rel=stylesheet href=/css/custom.css><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-66624669-5','auto');ga('send','pageview');</script><div id=wrapper><header id=header><h1><a href=/>scrambledegg</i></a></h1><nav class=links><ul><li><a href=/blog><i class="fa fa-newspaper-o">&nbsp;</i>Blog</a><li><a href=/categories><i class="fa fa-sitemap">&nbsp;</i>Categories</a><li><a href=/tool><i class="fa fa-wrench">&nbsp;</i>Tool</a><li><a href=/about><i class="fa fa-users">&nbsp;</i>About</a></ul></nav><nav class=main><ul><li id=share-nav class=share-menu style=display:none><a class=fa-share-alt href=#share-menu>Share</a><li class=search><a class=fa-search href=#search>Search</a><form id=search action=//google.com/search><input name=q placeholder=Search><input type=hidden name=q value=site:https://scrambledegg.github.io/></form><li class=menu><a class=fa-bars href=#menu>Menu</a></ul></nav></header><section id=menu><section><form class=search action=//google.com/search><input name=q placeholder=Search><input type=hidden name=q value=site:https://scrambledegg.github.io/></form></section><section><ul class=links><li><a href=/blog><h3><i class="fa fa-newspaper-o">&nbsp;</i>
Blog</h3></a><li><a href=/categories><h3><i class="fa fa-sitemap">&nbsp;</i>
Categories</h3></a><li><a href=/tool><h3><i class="fa fa-wrench">&nbsp;</i>
Tool</h3></a><li><a href=/about><h3><i class="fa fa-users">&nbsp;</i>
About</h3></a></ul></section><section><ul class=links><header><h3>Recent Posts</h3></header><li><a href=https://scrambledegg.github.io/blog/2016/05/08/probability-of-special-upgrade/><p>特別改造の成功率</p></a><li><a href=https://scrambledegg.github.io/blog/2016/04/cave-of-trials-ver11/><p>試練の洞窟(11周年ver)</p></a><li><a href=https://scrambledegg.github.io/blog/2016/04/hello-blog/><p>ブログ作ってみました</p></a></ul></section></section><div id=main><article class=post><header><div class=title><h2><a href=https://scrambledegg.github.io/blog/2016/05/08/probability-of-special-upgrade/>特別改造の成功率</a></h2><p>特別改造って、石いくつ使うとどのくらいの確率で5段階になるの？</div><div class=meta><time class=published datetime=2016-05-08>May 8, 2016</time>
<span class=author>もい</span></div></header><section id=social-share><ul class=icons><li><a href="//twitter.com/share?url=https%3a%2f%2fscrambledegg.github.io%2fblog%2f2016%2f05%2f08%2fprobability-of-special-upgrade%2f&text=%e7%89%b9%e5%88%a5%e6%94%b9%e9%80%a0%e3%81%ae%e6%88%90%e5%8a%9f%e7%8e%87&via=" target=_blank class="share-btn twitter"><i class="fa fa-twitter"></i><p>Twitter</p></a><li><a href="//plus.google.com/share?url=https%3a%2f%2fscrambledegg.github.io%2fblog%2f2016%2f05%2f08%2fprobability-of-special-upgrade%2f" target=_blank class="share-btn google-plus"><i class="fa fa-google-plus"></i><p>Google+</p></a><li><a href="//www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fscrambledegg.github.io%2fblog%2f2016%2f05%2f08%2fprobability-of-special-upgrade%2f" target=_blank class="share-btn facebook"><i class="fa fa-facebook"></i><p>Facebook</p></a><li><a href="//reddit.com/submit?url=https%3a%2f%2fscrambledegg.github.io%2fblog%2f2016%2f05%2f08%2fprobability-of-special-upgrade%2f&title=%e7%89%b9%e5%88%a5%e6%94%b9%e9%80%a0%e3%81%ae%e6%88%90%e5%8a%9f%e7%8e%87" target=_blank class="share-btn reddit"><i class="fa fa-reddit-alien"></i><p>Reddit</p></a><li><a href="//www.linkedin.com/shareArticle?url=https%3a%2f%2fscrambledegg.github.io%2fblog%2f2016%2f05%2f08%2fprobability-of-special-upgrade%2f&title=%e7%89%b9%e5%88%a5%e6%94%b9%e9%80%a0%e3%81%ae%e6%88%90%e5%8a%9f%e7%8e%87" target=_blank class="share-btn linkedin"><i class="fa fa-linkedin"></i><p>LinkedIn</p></a><li><a href="//www.stumbleupon.com/submit?url=https%3a%2f%2fscrambledegg.github.io%2fblog%2f2016%2f05%2f08%2fprobability-of-special-upgrade%2f&title=%e7%89%b9%e5%88%a5%e6%94%b9%e9%80%a0%e3%81%ae%e6%88%90%e5%8a%9f%e7%8e%87" target=_blank class="share-btn stumbleupon"><i class="fa fa-stumbleupon"></i><p>StumbleUpon</p></a><li><a href="mailto:?subject=Check out this post by %e3%82%82%e3%81%84&body=https%3a%2f%2fscrambledegg.github.io%2fblog%2f2016%2f05%2f08%2fprobability-of-special-upgrade%2f" target=_blank class="share-btn email"><i class="fa fa-envelope"></i><p>Email</p></a></ul></section><a href=https://scrambledegg.github.io/blog/2016/05/08/probability-of-special-upgrade/ class="image featured"><img src=/img/2016/05/08/feature.jpg alt></a><div id=content><h1 id=いんとろ>いんとろ</h1><p>久々に特別改造しました、もいです、こんばんは。<p>なかなか5段階にならないので、果たしてどのくらい確率が低いのか
ちょっぴり計算してみました。<br>小難しい話はよくわかんないですが、
一次元非対称ランダムウォーク(吸収壁あり)とか言うやつっぽいです。<br>いや、違うかもしれないです。よくわかんないです。<h1 id=計算する>計算する</h1><p>用意する石の個数と5段階改造の成功率を求めます。
まず、改造の成功率をまとめます。<table><thead><tr><th>改造段階<th>成功率<tbody><tr><td>0 -&gt; 1<td>100%<tr><td>1 -&gt; 2<td>50%<tr><td>2 -&gt; 3<td>50%<tr><td>3 -&gt; 4<td>45%<tr><td>4 -&gt; 5<td>45%</table><p>この表を参考に、遷移確率行列とかいう $i$ から $j$ への遷移確率を($i$, $j$)成分に持つような行列 $P$ を書きます。
$$
P = \left(
\begin{array}{cccccc}
0 & 1 & 0 & 0 & 0 & 0 \\
0.5 & 0 & 0.5 & 0 & 0 & 0 \\
0 & 0.5 & 0 & 0.5 & 0 & 0 \\
0 & 0 & 0.55 & 0 & 0.45 & 0 \\
0 & 0 & 0 & 0.55 & 0 & 0.45 \\
0 & 0 & 0 & 0 & 0 & 1 \\
\end{array}
\right)\\
$$<p>今回は5段階改造の成功率なので、0段階改造から始めて5段階改造に遷移する確率、
すなわち(1, 6)成分の確率が求めたい成功率になると思います。
この$P$を$n$乗してあげれば$n$個石を使った時の成功率になります。<p>(6, 6)成分の確率について、本来の特別改造だと5段階から5段階への遷移はありませんが、
ここを1にしてあげることで、$P^n$の$6$列目の確率は$n$個石を使うまでに5段階になる累計の確率になります。<p>さて、この$P^n$の指数$n$を増やしながら、
石をいくつ使うとどのくらいの確率で5段階になるのか計算した結果、次のグラフのようになりました。<div id=chart class=chart></div><p>(6段階する勇気ないので5段階までですごめんなさい。)<p>23個使って初めて50%超える感じです。<br>60個突っ込んでも90%行きません。<br>がくぶる！<p>計算が違うよーとかあれば下のコメントにください。<br>ではでは、良きMabinogiの日々を～。<hr><p>以下確率計算に使ったソース(間違ってるかも)<pre><code class=language-python>#!/bin/env python3
import numpy as np

# 遷移確率行列
P = np.array([
    [  0,   1,    0,    0,    0,    0],
    [0.5,   0,  0.5,    0,    0,    0],
    [  0, 0.5,    0,  0.5,    0,    0],
    [  0,   0, 0.55,    0, 0.45,    0],
    [  0,   0,    0, 0.55,    0, 0.45],
    [  0,   0,    0,    0,    0,    1],
],  dtype=np.float64)
# 初期は0段階
INITIAL_PROB = np.array([1, 0, 0, 0, 0, 0])
# 石の数
NUM = 150

powerP = INITIAL_PROB
for i in range(NUM):
    print(powerP @ np.array([0,0,0,0,0,1]).T)
    powerP = powerP @ P
</code></pre><p><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/c3/0.4.11/c3.css><link rel=stylesheet href=/css/chart.css><script src=https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.17/d3.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/c3/0.4.11/c3.min.js></script><script src=/js/2016/05/08/script.js></script><script type=text/x-mathjax-config>

  MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ["\\(","\\)"]] } });


</script><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script></div><footer><ul class=stats><li><i class="fa fa-sitemap">&nbsp;</i>
Category<li><a href=/categories/mabinogi>mabinogi</a></ul></footer></article><ul class="actions pagination"><li><a href=https://scrambledegg.github.io/blog/2016/04/cave-of-trials-ver11/ class="button big previous">試練の洞窟(11周年ver)</a></ul><article class=post><div id=disqus_thread></div><script>var disqus_shortname='scrambledegg-github-io';var disqus_identifier='https:\/\/scrambledegg.github.io\/blog\/2016\/05\/08\/probability-of-special-upgrade\/';var disqus_title='特別改造の成功率';var disqus_url='https:\/\/scrambledegg.github.io\/blog\/2016\/05\/08\/probability-of-special-upgrade\/';(function(){var dsq=document.createElement('script');dsq.type='text/javascript';dsq.async=true;dsq.src='//'+disqus_shortname+'.disqus.com/embed.js';(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(dsq);})();</script><noscript>Please enable JavaScript to view the <a href=http://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=http://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></article><section id=share-menu><section id=social-share-nav><ul class=links><header><h3>Share this post <i class="fa fa-smile-o"></i></h3></header><li><a href="//twitter.com/share?url=https%3a%2f%2fscrambledegg.github.io%2fblog%2f2016%2f05%2f08%2fprobability-of-special-upgrade%2f&text=%e7%89%b9%e5%88%a5%e6%94%b9%e9%80%a0%e3%81%ae%e6%88%90%e5%8a%9f%e7%8e%87&via=" target=_blank class="share-btn twitter"><i class="fa fa-twitter"></i><p>Twitter</p></a><li><a href="//plus.google.com/share?url=https%3a%2f%2fscrambledegg.github.io%2fblog%2f2016%2f05%2f08%2fprobability-of-special-upgrade%2f" target=_blank class="share-btn google-plus"><i class="fa fa-google-plus"></i><p>Google+</p></a><li><a href="//www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fscrambledegg.github.io%2fblog%2f2016%2f05%2f08%2fprobability-of-special-upgrade%2f" target=_blank class="share-btn facebook"><i class="fa fa-facebook"></i><p>Facebook</p></a><li><a href="//reddit.com/submit?url=https%3a%2f%2fscrambledegg.github.io%2fblog%2f2016%2f05%2f08%2fprobability-of-special-upgrade%2f&title=%e7%89%b9%e5%88%a5%e6%94%b9%e9%80%a0%e3%81%ae%e6%88%90%e5%8a%9f%e7%8e%87" target=_blank class="share-btn reddit"><i class="fa fa-reddit-alien"></i><p>Reddit</p></a><li><a href="//www.linkedin.com/shareArticle?url=https%3a%2f%2fscrambledegg.github.io%2fblog%2f2016%2f05%2f08%2fprobability-of-special-upgrade%2f&title=%e7%89%b9%e5%88%a5%e6%94%b9%e9%80%a0%e3%81%ae%e6%88%90%e5%8a%9f%e7%8e%87" target=_blank class="share-btn linkedin"><i class="fa fa-linkedin"></i><p>LinkedIn</p></a><li><a href="//www.stumbleupon.com/submit?url=https%3a%2f%2fscrambledegg.github.io%2fblog%2f2016%2f05%2f08%2fprobability-of-special-upgrade%2f&title=%e7%89%b9%e5%88%a5%e6%94%b9%e9%80%a0%e3%81%ae%e6%88%90%e5%8a%9f%e7%8e%87" target=_blank class="share-btn stumbleupon"><i class="fa fa-stumbleupon"></i><p>StumbleUpon</p></a><li><a href="mailto:?subject=Check out this post by %e3%82%82%e3%81%84&body=https%3a%2f%2fscrambledegg.github.io%2fblog%2f2016%2f05%2f08%2fprobability-of-special-upgrade%2f" target=_blank class="share-btn email"><i class="fa fa-envelope"></i><p>Email</p></a></ul></section></section></div><section id=sidebar><section id=intro><a href=/ class=logo><img src=/img/logo/logo.jpg alt=logo></a><header><h2>scrambledegg&#39;s blog</h2><p>マビノギ ルエリサーバ 6chで活動するギルドscrambledeggのブログです</header><ul class=icons><li><a href=https://scrambledegg.github.io/index.xml type=application/rss+xml target=_blank title=RSS class="fa fa-rss"></a></ul></section><section id=recent-posts><ul class=posts><header><h3>Recent Posts</h3></header><li><article><header><h3><a href=https://scrambledegg.github.io/blog/2016/05/08/probability-of-special-upgrade/>特別改造の成功率</a></h3><time class=published datetime=2016-05-08>May 8, 2016</time></header></article><li><article><header><h3><a href=https://scrambledegg.github.io/blog/2016/04/cave-of-trials-ver11/>試練の洞窟(11周年ver)</a></h3><time class=published datetime=2016-04-23>April 23, 2016</time></header></article><li><article><header><h3><a href=https://scrambledegg.github.io/blog/2016/04/hello-blog/>ブログ作ってみました</a></h3><time class=published datetime=2016-04-22>April 22, 2016</time></header></article><li><ul class=actions><li><a href=/blog/ class=button>View more posts</a></ul></ul></section><section id=categories><ul class=posts><header><h3><a href=/categories/>Categories</a></h3></header><li><article><header><a href=/categories/mabinogi/>mabinogi</a>
<span style=float:right>3</span></header></article></ul></section><section class=blurb><h2>About</h2><p>ギルド石はダンバートン北。たまり場はダンバートンの広場です！<ul class=actions><li><a href=/about/ class=button>Learn More</a></ul></section><section id=footer><ul class=icons><li><a href=https://scrambledegg.github.io/index.xml type=application/rss+xml target=_blank title=RSS class="fa fa-rss"></a></ul><p class=copyright>&copy; scrambledegg&#39;s blog. Design: <a href=http://html5up.net target=_blank>HTML5 UP</a>. Ported by <a href=//github.com/jpescador target=_blank>Julio Pescador</a>. Powered by <a href=//gohugo.io target=_blank>Hugo</a></section></section></div><a id=back-to-top href=# class="fa fa-arrow-up fa-border fa-2x"></a><script src=/js/jquery.min.js></script><script src=/js/skel.min.js></script><script src=/js/util.js></script><script src=/js/main.js></script><script src=/js/backToTop.js></script><script src=/js/highlight.pack.js></script><script>hljs.initHighlightingOnLoad();</script>